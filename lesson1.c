/*******************************************
  ??:LED.C
  ??:???ICC AVR6.25A,???AVR Studio4.10 
  ??:ATMEGA16??
  ??:2006?12?10? 
  ??:???????LED?1. ??? 2.?????LED
  ??:??«AVR?????C?????????»(???????)
/******************************************/
#include <iom16v.h>			//???????
#include <macros.h>			//??"?"?????
#include <stdio.h>			//?????????
#include <AVR_PQ1A.h>		//??????????

/*******************************************
????: One_led
?    ?: ?????????LED
?    ?: number--???LED
	  	  light--?TRUE??????LED,?FALSE??????LED
???  : ?
/********************************************/
void One_led(uchar number,uchar light)
{uchar i;
 if(light==TRUE)		   //????
 {
  PORTB&=~BIT(number);	   //????
  PORTA|=BIT(LEDLK);	   //????
  Delayms(5);			   //????
  PORTA&=~BIT(LEDLK);	   //????
 }
 else
 {
  PORTB|=BIT(number);	   //????
  PORTA|=BIT(LEDLK);	   //????
  Delayms(5);			   //????
  PORTA&=~BIT(LEDLK);	   //????
 }
}
/*******************************************
????: All_led
?    ?: ????????LED
?    ?: light--?TRUE????????LED,?FALSE????????LED
???  : ?
/********************************************/
void All_led(uchar light)
{
 if(light)
 {
  PORTB&=~ALLLED;  		 //ALLLED=0xFF,???LED??
  PORTA|=BIT(LEDLK);	 //????
  Delayms(5);			 //????
  PORTA&=~BIT(LEDLK);	 //????
 }
 else
 {
  PORTB|=ALLLED;		 //ALLLED=0xFF,???LED??
  PORTA|=BIT(LEDLK);	 //????
  Delayms(5);			 //????
  PORTA&=~BIT(LEDLK);	 //????
 }
}
/*******************************************
????: Flow_led
?    ?: ???(????)
?    ?: MS--????LED?????,?????
???  : ?
/********************************************/
void Flow_LED(uchar MS)
{
 uchar i;
 for(i=0;i<8;i++)	//??8?,8?LED????
 {
  All_led(FALSE);	//????
  One_led(i,TRUE);	//?????LED
  Delayms(MS);		//???????
 } 
}
/*******************************************
????: Flash_led
?    ?: ?????LED(????)
?    ?: number--???LED
	  	  MS--LED???????
???  : ?
/********************************************/
void Flash_LED(uchar number,uchar MS)
{
 One_led(number,TRUE);		//?????LED
 Delayms(MS);				//???????
 All_led(FALSE);			//?????LED
 Delayms(MS);				//???????
 One_led(number,FALSE);		//?????LED 
}
/*******************************************
????: main
?    ?: 1. ??? 2.?????LED
?    ?: ?
???  : ?
/********************************************/
void main(void)
{	 
 uchar i,bit;
 i=0;  	   					//i=0?????,i=1?????
 bit=0;						//bit?????LED
 Board_init( );	   			//??????
 while(1)
 {
  switch(i)
  {
   case 0:
  	   Flow_LED(200);		//i=0,?????????
	   break;
   case 1:	 				
   	   Flash_LED(bit,100);	//i=1,?????????
  }
 }  
}